<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cola Vending Machine: CVM-4: fsm.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cola Vending Machine: CVM-4
   </div>
   <div id="projectbrief">Event driven device control software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00035.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsm.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="a00011_source.html">changeDispenser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00017_source.html">coinAcceptor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00023_source.html">colaDispenser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00029_source.html">display.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00038_source.html">fsm.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fsm.c:</div>
<div class="dyncontent">
<div class="center"><img src="a00036.png" border="0" usemap="#fsm_8c" alt=""/></div>
<map name="fsm_8c" id="fsm_8c">
<area shape="rect" title=" " alt="" coords="326,5,381,32"/>
<area shape="rect" href="a00011.html" title=" " alt="" coords="5,80,139,107"/>
<area shape="rect" href="a00017.html" title=" " alt="" coords="163,80,272,107"/>
<area shape="rect" href="a00023.html" title=" " alt="" coords="296,80,411,107"/>
<area shape="rect" href="a00029.html" title=" " alt="" coords="435,80,509,107"/>
<area shape="rect" href="a00038.html" title=" " alt="" coords="534,80,589,107"/>
<area shape="rect" href="a00032.html" title=" " alt="" coords="354,155,425,181"/>
</map>
</div>
</div>
<p><a href="a00035_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a52b77dcd6180d54d314b8cbf0b4dc2d9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a> { <br />
&#160;&#160;<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a">S_NO</a>, 
<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a>, 
<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a>, 
<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>, 
<br />
&#160;&#160;<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d">S_DETECTED_10C</a>, 
<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2">S_DETECTED_20C</a>, 
<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a>, 
<a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84">S_WAIT_FOR_UPDATE_CHANGE</a>
<br />
 }</td></tr>
<tr class="separator:a52b77dcd6180d54d314b8cbf0b4dc2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abb19c03ebfcdb384839fba01d9b9e081"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#abb19c03ebfcdb384839fba01d9b9e081">generateEvent</a> (void)</td></tr>
<tr class="separator:abb19c03ebfcdb384839fba01d9b9e081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ff6b2d79839460d92e6b4ab7f1a4bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#aa2ff6b2d79839460d92e6b4ab7f1a4bb">eventHandler</a> (<a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> <a class="el" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a>)</td></tr>
<tr class="separator:aa2ff6b2d79839460d92e6b4ab7f1a4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed2a5ce081a27efced2c21728272999"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#afed2a5ce081a27efced2c21728272999">CVMinitialise</a> (void)</td></tr>
<tr class="separator:afed2a5ce081a27efced2c21728272999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5573c265c592d564185cda9843871642"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a5573c265c592d564185cda9843871642">CVMcheckCents</a> (int coinValue)</td></tr>
<tr class="separator:a5573c265c592d564185cda9843871642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a152c666b1dec04b601bfc2eeae0cf38f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a152c666b1dec04b601bfc2eeae0cf38f">CVMcheckChange</a> (void)</td></tr>
<tr class="separator:a152c666b1dec04b601bfc2eeae0cf38f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae5659a75d6430a59e9d701dab327e2ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a> = <a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a></td></tr>
<tr class="separator:ae5659a75d6430a59e9d701dab327e2ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ff367885b2febcb598f12011e8e0d4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a> = <a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93">E_NO</a></td></tr>
<tr class="separator:a4ff367885b2febcb598f12011e8e0d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3f4f51e839f36f93a51e18363ffd9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> = 0</td></tr>
<tr class="separator:a6b3f4f51e839f36f93a51e18363ffd9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a1b788f5fac842a945bfc9538beac73"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a0a1b788f5fac842a945bfc9538beac73">priceCola</a> = 0</td></tr>
<tr class="separator:a0a1b788f5fac842a945bfc9538beac73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac710c7bfde8686dcdfa07f1800ab01b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a> = 0</td></tr>
<tr class="separator:ac710c7bfde8686dcdfa07f1800ab01b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b325bccb410e0eb438a4ab32c7a885"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a77b325bccb410e0eb438a4ab32c7a885">availableChange</a> = 0</td></tr>
<tr class="separator:a77b325bccb410e0eb438a4ab32c7a885"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a52b77dcd6180d54d314b8cbf0b4dc2d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b77dcd6180d54d314b8cbf0b4dc2d9">&#9670;&nbsp;</a></span>state_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a"></a>S_NO&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923"></a>S_START&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4"></a>S_INITIALISED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad"></a>S_WAIT_FOR_COINS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d"></a>S_DETECTED_10C&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2"></a>S_DETECTED_20C&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d"></a>S_DISPENSE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84"></a>S_WAIT_FOR_UPDATE_CHANGE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00007">7</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;             {</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a">S_NO</a>,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a>,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d">S_DETECTED_10C</a>,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2">S_DETECTED_20C</a>,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a>,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84">S_WAIT_FOR_UPDATE_CHANGE</a></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;} <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5573c265c592d564185cda9843871642"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5573c265c592d564185cda9843871642">&#9670;&nbsp;</a></span>CVMcheckCents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> CVMcheckCents </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>coinValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00201">201</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> += coinValue;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> &gt;= <a class="code" href="a00035.html#a0a1b788f5fac842a945bfc9538beac73">priceCola</a>)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0aa96bcff50eed56462b99c738d9ca4e3d">E_ENOUGH</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a63b860fd575f477a167c2a4a28a4968f">E_NOT_ENOUGH</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_a5573c265c592d564185cda9843871642_icgraph.png" border="0" usemap="#a00035_a5573c265c592d564185cda9843871642_icgraph" alt=""/></div>
<map name="a00035_a5573c265c592d564185cda9843871642_icgraph" id="a00035_a5573c265c592d564185cda9843871642_icgraph">
<area shape="rect" title=" " alt="" coords="256,5,376,32"/>
<area shape="rect" href="a00038.html#abb19c03ebfcdb384839fba01d9b9e081" title=" " alt="" coords="104,5,208,32"/>
<area shape="rect" href="a00047.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a152c666b1dec04b601bfc2eeae0cf38f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a152c666b1dec04b601bfc2eeae0cf38f">&#9670;&nbsp;</a></span>CVMcheckChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> CVMcheckChange </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00214">214</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <a class="code" href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a> = <a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> - <a class="code" href="a00035.html#a0a1b788f5fac842a945bfc9538beac73">priceCola</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="a00035.html#a77b325bccb410e0eb438a4ab32c7a885">availableChange</a> &gt;= <a class="code" href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a>)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <a class="code" href="a00035.html#a77b325bccb410e0eb438a4ab32c7a885">availableChange</a> -= <a class="code" href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a82571e1f0565e4b476c5ff5bf56982fd">E_CHANGE_DISPENSE</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a95d7ea08aff6fc6a4a490a8bb23526c9">E_NO_CHANGE_DISPENSE</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_a152c666b1dec04b601bfc2eeae0cf38f_icgraph.png" border="0" usemap="#a00035_a152c666b1dec04b601bfc2eeae0cf38f_icgraph" alt=""/></div>
<map name="a00035_a152c666b1dec04b601bfc2eeae0cf38f_icgraph" id="a00035_a152c666b1dec04b601bfc2eeae0cf38f_icgraph">
<area shape="rect" title=" " alt="" coords="256,5,387,32"/>
<area shape="rect" href="a00038.html#abb19c03ebfcdb384839fba01d9b9e081" title=" " alt="" coords="104,5,208,32"/>
<area shape="rect" href="a00047.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="afed2a5ce081a27efced2c21728272999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed2a5ce081a27efced2c21728272999">&#9670;&nbsp;</a></span>CVMinitialise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> CVMinitialise </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialises all subsystems (devices) and puts an initial text to the display. Error conditions of initialised subsystems are ignored. For that reason <a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93">E_NO</a> is returned. </p><dl class="todo"><dt><b><a class="el" href="a00050.html#_todo000002">Todo:</a></b></dt><dd>Handle error conditions generated by the initialisation of every subsystem in an error handling state. All subsystem initialisation functions should return an event about the initialisation result (error condition). </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00189">189</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <a class="code" href="a00026.html#a19ffdfbb88b7984ac489cbf8445a34dc">DSPinitialise</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <a class="code" href="a00014.html#a1779ed0c9df51c17894156ef554a8e0a">CNAinitialise</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <a class="code" href="a00020.html#a911f5f2d5f07578971810985a6209077">CLDinitialise</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <a class="code" href="a00008.html#a6ba4a8b25bddfe02b6b8895ca5ad65ba">CHDinitialise</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <a class="code" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c">DSPshow</a>(<span class="stringliteral">&quot;----------------------- Cola vending machine - 4 &quot;</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;           <span class="stringliteral">&quot;---------------------&quot;</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93">E_NO</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_afed2a5ce081a27efced2c21728272999_cgraph.png" border="0" usemap="#a00035_afed2a5ce081a27efced2c21728272999_cgraph" alt=""/></div>
<map name="a00035_afed2a5ce081a27efced2c21728272999_cgraph" id="a00035_afed2a5ce081a27efced2c21728272999_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,104,133"/>
<area shape="rect" href="a00008.html#a6ba4a8b25bddfe02b6b8895ca5ad65ba" title=" " alt="" coords="152,5,248,32"/>
<area shape="rect" href="a00020.html#a911f5f2d5f07578971810985a6209077" title=" " alt="" coords="153,56,247,83"/>
<area shape="rect" href="a00014.html#a1779ed0c9df51c17894156ef554a8e0a" title=" " alt="" coords="152,107,248,133"/>
<area shape="rect" href="a00026.html#a19ffdfbb88b7984ac489cbf8445a34dc" title=" " alt="" coords="152,157,248,184"/>
<area shape="rect" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c" title=" " alt="" coords="161,208,239,235"/>
<area shape="rect" href="a00026.html#a80aa4c0f241c9204a7a185f8590a95e4" title=" " alt="" coords="296,81,445,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_afed2a5ce081a27efced2c21728272999_icgraph.png" border="0" usemap="#a00035_afed2a5ce081a27efced2c21728272999_icgraph" alt=""/></div>
<map name="a00035_afed2a5ce081a27efced2c21728272999_icgraph" id="a00035_afed2a5ce081a27efced2c21728272999_icgraph">
<area shape="rect" title=" " alt="" coords="248,5,347,32"/>
<area shape="rect" href="a00038.html#abd62b96112400b8d3044687c4915b1c7" title=" " alt="" coords="104,5,200,32"/>
<area shape="rect" href="a00047.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="aa2ff6b2d79839460d92e6b4ab7f1a4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ff6b2d79839460d92e6b4ab7f1a4bb">&#9670;&nbsp;</a></span>eventHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uses the global variable <a class="el" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a> to determine how to process the received <a class="el" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a>. If an <a class="el" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a> is received that should not be in handled in the currentState this is considered as a system error. The switch statements use the default case to show an appropriate message to the display. It is necessary to give in all default cases the nextState an appropriate value to avoid undefined behaviour. </p><dl class="section post"><dt>Postcondition</dt><dd>Updated <a class="el" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a> by nextSate. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00072">72</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a> nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a">S_NO</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <span class="keywordflow">switch</span>(<a class="code" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a>)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a>:</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="keyword">event</span> = <a class="code" href="a00035.html#afed2a5ce081a27efced2c21728272999">CVMinitialise</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a>:</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> = 0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="a00035.html#a0a1b788f5fac842a945bfc9538beac73">priceCola</a> = 125;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a> = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="a00035.html#a77b325bccb410e0eb438a4ab32c7a885">availableChange</a> = 20;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keyword">event</span> = <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a59ef0a2486ae8824c265e14da5824e5e">E_CONTINUE</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0acf19b15f89d2a5f703f5de618712cf97">E_10C</a>:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d">S_DETECTED_10C</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a9bdeac08a396f80e1436149ab0dbd841">E_20C</a>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2">S_DETECTED_20C</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         <a class="code" href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a>(<span class="stringliteral">&quot;S_WAIT_FOR_COINS received event &quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                            <span class="stringliteral">&quot;not handled&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d">S_DETECTED_10C</a>:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a63b860fd575f477a167c2a4a28a4968f">E_NOT_ENOUGH</a>:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0aa96bcff50eed56462b99c738d9ca4e3d">E_ENOUGH</a>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;         <a class="code" href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a>(<span class="stringliteral">&quot;S_DETECTED_10C received event &quot;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                            <span class="stringliteral">&quot;not handled&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2">S_DETECTED_20C</a>:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a63b860fd575f477a167c2a4a28a4968f">E_NOT_ENOUGH</a>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0aa96bcff50eed56462b99c738d9ca4e3d">E_ENOUGH</a>:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;         <a class="code" href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a>(<span class="stringliteral">&quot;S_DETECTED_20C received event &quot;</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                            <span class="stringliteral">&quot;not handled&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a>:</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a>)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a95d7ea08aff6fc6a4a490a8bb23526c9">E_NO_CHANGE_DISPENSE</a>:</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;         <a class="code" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c">DSPshow</a>(<span class="stringliteral">&quot;Sorry, no change available&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         <a class="code" href="a00008.html#af4e0f70bafc93489e3af0b2314156858">CHDdispenseChange</a>(<a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         <a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84">S_WAIT_FOR_UPDATE_CHANGE</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a82571e1f0565e4b476c5ff5bf56982fd">E_CHANGE_DISPENSE</a>:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         <a class="code" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c">DSPshow</a>(<span class="stringliteral">&quot;Please take your cola&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         <a class="code" href="a00020.html#afdd677169e16078a00183b2543fa3ea7">CLDdispenseCola</a>();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;         <a class="code" href="a00008.html#af4e0f70bafc93489e3af0b2314156858">CHDdispenseChange</a>(<a class="code" href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <a class="code" href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a> = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         <a class="code" href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a>(<span class="stringliteral">&quot;S_DISPENSE received an unknown event&quot;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84">S_WAIT_FOR_UPDATE_CHANGE</a>:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c">DSPshow</a>(<span class="stringliteral">&quot;Ask administrator to fill change storage ... done&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="a00035.html#a77b325bccb410e0eb438a4ab32c7a885">availableChange</a> = 20;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a>(<span class="stringliteral">&quot;CVM in unknown current state&quot;</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      nextState = <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <a class="code" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a> = nextState;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_cgraph.png" border="0" usemap="#a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_cgraph" alt=""/></div>
<map name="a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_cgraph" id="a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_cgraph">
<area shape="rect" title=" " alt="" coords="5,163,101,189"/>
<area shape="rect" href="a00008.html#af4e0f70bafc93489e3af0b2314156858" title=" " alt="" coords="153,5,298,32"/>
<area shape="rect" href="a00020.html#afdd677169e16078a00183b2543fa3ea7" title=" " alt="" coords="163,75,288,101"/>
<area shape="rect" href="a00035.html#afed2a5ce081a27efced2c21728272999" title=" " alt="" coords="176,163,275,189"/>
<area shape="rect" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c" title=" " alt="" coords="358,289,437,316"/>
<area shape="rect" href="a00026.html#a42c6480d0287392aa8bb294053797fe3" title=" " alt="" coords="149,264,301,291"/>
<area shape="rect" href="a00026.html#a80aa4c0f241c9204a7a185f8590a95e4" title=" " alt="" coords="493,112,643,139"/>
<area shape="rect" href="a00008.html#a6ba4a8b25bddfe02b6b8895ca5ad65ba" title=" " alt="" coords="349,87,445,113"/>
<area shape="rect" href="a00020.html#a911f5f2d5f07578971810985a6209077" title=" " alt="" coords="350,137,445,164"/>
<area shape="rect" href="a00014.html#a1779ed0c9df51c17894156ef554a8e0a" title=" " alt="" coords="349,188,445,215"/>
<area shape="rect" href="a00026.html#a19ffdfbb88b7984ac489cbf8445a34dc" title=" " alt="" coords="349,239,445,265"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_icgraph.png" border="0" usemap="#a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_icgraph" alt=""/></div>
<map name="a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_icgraph" id="a00035_aa2ff6b2d79839460d92e6b4ab7f1a4bb_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,200,32"/>
<area shape="rect" href="a00047.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="abb19c03ebfcdb384839fba01d9b9e081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb19c03ebfcdb384839fba01d9b9e081">&#9670;&nbsp;</a></span>generateEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> generateEvent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Because we do not buffer events in an event queue, we send in the current state, <a class="el" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a>, only events that can be handled. Implementing buffering using a queue and multi-threading is outside the scope of this introduction to C programming. </p><dl class="section return"><dt>Returns</dt><dd>Generated event for the <a class="el" href="a00035.html#aa2ff6b2d79839460d92e6b4ab7f1a4bb">eventHandler</a> function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00030">30</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;   <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> evnt = <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93">E_NO</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;   <span class="keywordflow">switch</span>(<a class="code" href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a>)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;   {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a">S_NO</a>:</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;         <a class="code" href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a>(<span class="stringliteral">&quot;current state is not initialised&quot;</span>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a>:</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a>:</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;         evnt = <a class="code" href="a00032.html#ab84d33304ff89cf68d47913663acbad0a59ef0a2486ae8824c265e14da5824e5e">E_CONTINUE</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a>:</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;         <a class="code" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c">DSPshow</a>(<span class="stringliteral">&quot;Enter your coins please&quot;</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;         evnt = <a class="code" href="a00014.html#a66d74535b2f48198520b9619a6778360">CNAcheckCoins</a>();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d">S_DETECTED_10C</a>:</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;         evnt = <a class="code" href="a00035.html#a5573c265c592d564185cda9843871642">CVMcheckCents</a>(10);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2">S_DETECTED_20C</a>:</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;         evnt = <a class="code" href="a00035.html#a5573c265c592d564185cda9843871642">CVMcheckCents</a>(20);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a>:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;         evnt = <a class="code" href="a00035.html#a152c666b1dec04b601bfc2eeae0cf38f">CVMcheckChange</a>();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84">S_WAIT_FOR_UPDATE_CHANGE</a>:</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <span class="keywordflow">return</span> evnt;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_abb19c03ebfcdb384839fba01d9b9e081_cgraph.png" border="0" usemap="#a00035_abb19c03ebfcdb384839fba01d9b9e081_cgraph" alt=""/></div>
<map name="a00035_abb19c03ebfcdb384839fba01d9b9e081_cgraph" id="a00035_abb19c03ebfcdb384839fba01d9b9e081_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,109,209"/>
<area shape="rect" href="a00014.html#a66d74535b2f48198520b9619a6778360" title=" " alt="" coords="175,81,292,108"/>
<area shape="rect" href="a00035.html#a5573c265c592d564185cda9843871642" title=" " alt="" coords="173,132,293,159"/>
<area shape="rect" href="a00035.html#a152c666b1dec04b601bfc2eeae0cf38f" title=" " alt="" coords="168,183,299,209"/>
<area shape="rect" href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c" title=" " alt="" coords="194,233,273,260"/>
<area shape="rect" href="a00026.html#a42c6480d0287392aa8bb294053797fe3" title=" " alt="" coords="157,284,309,311"/>
<area shape="rect" href="a00014.html#acd496e6df8f6be6bcdced42f9a99fb55" title=" " alt="" coords="357,56,460,83"/>
<area shape="rect" href="a00026.html#a9ec0558d72c924ba4ea341dab140f653" title=" " alt="" coords="508,107,681,133"/>
<area shape="rect" href="a00026.html#a80aa4c0f241c9204a7a185f8590a95e4" title=" " alt="" coords="520,5,669,32"/>
<area shape="rect" href="a00041.html#aa647ccf1ed00a48c23266cdd917aa027" title=" " alt="" coords="549,56,641,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00035_abb19c03ebfcdb384839fba01d9b9e081_icgraph.png" border="0" usemap="#a00035_abb19c03ebfcdb384839fba01d9b9e081_icgraph" alt=""/></div>
<map name="a00035_abb19c03ebfcdb384839fba01d9b9e081_icgraph" id="a00035_abb19c03ebfcdb384839fba01d9b9e081_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,208,32"/>
<area shape="rect" href="a00047.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a77b325bccb410e0eb438a4ab32c7a885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77b325bccb410e0eb438a4ab32c7a885">&#9670;&nbsp;</a></span>availableChange</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int availableChange = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00023">23</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="ac710c7bfde8686dcdfa07f1800ab01b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac710c7bfde8686dcdfa07f1800ab01b5">&#9670;&nbsp;</a></span>change</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int change = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00022">22</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="ae5659a75d6430a59e9d701dab327e2ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5659a75d6430a59e9d701dab327e2ae">&#9670;&nbsp;</a></span>currentState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a> currentState = <a class="el" href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00018">18</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a4ff367885b2febcb598f12011e8e0d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ff367885b2febcb598f12011e8e0d4d">&#9670;&nbsp;</a></span>event</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> event = <a class="el" href="a00032.html#ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93">E_NO</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00019">19</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a6b3f4f51e839f36f93a51e18363ffd9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b3f4f51e839f36f93a51e18363ffd9a">&#9670;&nbsp;</a></span>insertedMoney</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int insertedMoney = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00020">20</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a0a1b788f5fac842a945bfc9538beac73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a1b788f5fac842a945bfc9538beac73">&#9670;&nbsp;</a></span>priceCola</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int priceCola = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00035_source.html#l00021">21</a> of file <a class="el" href="a00035_source.html">fsm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9af85e27b92ff03c51359ff4f4aba281ad">S_WAIT_FOR_COINS</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00011">fsm.c:11</a></div></div>
<div class="ttc" id="aa00035_html_ac710c7bfde8686dcdfa07f1800ab01b5"><div class="ttname"><a href="a00035.html#ac710c7bfde8686dcdfa07f1800ab01b5">change</a></div><div class="ttdeci">int change</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00022">fsm.c:22</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0a59ef0a2486ae8824c265e14da5824e5e"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0a59ef0a2486ae8824c265e14da5824e5e">E_CONTINUE</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00007">events.h:7</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0aa96bcff50eed56462b99c738d9ca4e3d"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0aa96bcff50eed56462b99c738d9ca4e3d">E_ENOUGH</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00011">events.h:11</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9affd6a72a39c00123dc36c1d264bfdd3a">S_NO</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00008">fsm.c:8</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a015cb2085abab9316c4db899bd152f2d">S_DETECTED_10C</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00012">fsm.c:12</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0ac3a0a35ad314818a012bc9899eeb0a93">E_NO</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00005">events.h:5</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a48c1fe3d001da276fdca7507c4695a84">S_WAIT_FOR_UPDATE_CHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00015">fsm.c:15</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0a63b860fd575f477a167c2a4a28a4968f"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0a63b860fd575f477a167c2a4a28a4968f">E_NOT_ENOUGH</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00010">events.h:10</a></div></div>
<div class="ttc" id="aa00035_html_a152c666b1dec04b601bfc2eeae0cf38f"><div class="ttname"><a href="a00035.html#a152c666b1dec04b601bfc2eeae0cf38f">CVMcheckChange</a></div><div class="ttdeci">event_e CVMcheckChange(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00214">fsm.c:214</a></div></div>
<div class="ttc" id="aa00020_html_a911f5f2d5f07578971810985a6209077"><div class="ttname"><a href="a00020.html#a911f5f2d5f07578971810985a6209077">CLDinitialise</a></div><div class="ttdeci">void CLDinitialise(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00020_source.html#l00006">colaDispenser.c:6</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9">state_e</a></div><div class="ttdeci">state_e</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00007">fsm.c:7</a></div></div>
<div class="ttc" id="aa00035_html_afed2a5ce081a27efced2c21728272999"><div class="ttname"><a href="a00035.html#afed2a5ce081a27efced2c21728272999">CVMinitialise</a></div><div class="ttdeci">event_e CVMinitialise(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00189">fsm.c:189</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0a95d7ea08aff6fc6a4a490a8bb23526c9"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0a95d7ea08aff6fc6a4a490a8bb23526c9">E_NO_CHANGE_DISPENSE</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00013">events.h:13</a></div></div>
<div class="ttc" id="aa00035_html_a4ff367885b2febcb598f12011e8e0d4d"><div class="ttname"><a href="a00035.html#a4ff367885b2febcb598f12011e8e0d4d">event</a></div><div class="ttdeci">event_e event</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00019">fsm.c:19</a></div></div>
<div class="ttc" id="aa00035_html_a6b3f4f51e839f36f93a51e18363ffd9a"><div class="ttname"><a href="a00035.html#a6b3f4f51e839f36f93a51e18363ffd9a">insertedMoney</a></div><div class="ttdeci">int insertedMoney</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00020">fsm.c:20</a></div></div>
<div class="ttc" id="aa00008_html_af4e0f70bafc93489e3af0b2314156858"><div class="ttname"><a href="a00008.html#af4e0f70bafc93489e3af0b2314156858">CHDdispenseChange</a></div><div class="ttdeci">void CHDdispenseChange(int change)</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00012">changeDispenser.c:12</a></div></div>
<div class="ttc" id="aa00035_html_a77b325bccb410e0eb438a4ab32c7a885"><div class="ttname"><a href="a00035.html#a77b325bccb410e0eb438a4ab32c7a885">availableChange</a></div><div class="ttdeci">int availableChange</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00023">fsm.c:23</a></div></div>
<div class="ttc" id="aa00014_html_a1779ed0c9df51c17894156ef554a8e0a"><div class="ttname"><a href="a00014.html#a1779ed0c9df51c17894156ef554a8e0a">CNAinitialise</a></div><div class="ttdeci">void CNAinitialise(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00014_source.html#l00008">coinAcceptor.c:8</a></div></div>
<div class="ttc" id="aa00035_html_a5573c265c592d564185cda9843871642"><div class="ttname"><a href="a00035.html#a5573c265c592d564185cda9843871642">CVMcheckCents</a></div><div class="ttdeci">event_e CVMcheckCents(int coinValue)</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00201">fsm.c:201</a></div></div>
<div class="ttc" id="aa00035_html_ae5659a75d6430a59e9d701dab327e2ae"><div class="ttname"><a href="a00035.html#ae5659a75d6430a59e9d701dab327e2ae">currentState</a></div><div class="ttdeci">state_e currentState</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00018">fsm.c:18</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0">event_e</a></div><div class="ttdeci">event_e</div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00004">events.h:4</a></div></div>
<div class="ttc" id="aa00008_html_a6ba4a8b25bddfe02b6b8895ca5ad65ba"><div class="ttname"><a href="a00008.html#a6ba4a8b25bddfe02b6b8895ca5ad65ba">CHDinitialise</a></div><div class="ttdeci">void CHDinitialise(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00007">changeDispenser.c:7</a></div></div>
<div class="ttc" id="aa00026_html_a42c6480d0287392aa8bb294053797fe3"><div class="ttname"><a href="a00026.html#a42c6480d0287392aa8bb294053797fe3">DSPshowSystemError</a></div><div class="ttdeci">void DSPshowSystemError(const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00026">display.c:26</a></div></div>
<div class="ttc" id="aa00026_html_a9ae019f3af201b276f9ea7bd9940399c"><div class="ttname"><a href="a00026.html#a9ae019f3af201b276f9ea7bd9940399c">DSPshow</a></div><div class="ttdeci">void DSPshow(const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00011">display.c:11</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0acf19b15f89d2a5f703f5de618712cf97"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0acf19b15f89d2a5f703f5de618712cf97">E_10C</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00008">events.h:8</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0a9bdeac08a396f80e1436149ab0dbd841"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0a9bdeac08a396f80e1436149ab0dbd841">E_20C</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00009">events.h:9</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9aa070cb67853a2717d04311125e35a923">S_START</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00009">fsm.c:9</a></div></div>
<div class="ttc" id="aa00035_html_a0a1b788f5fac842a945bfc9538beac73"><div class="ttname"><a href="a00035.html#a0a1b788f5fac842a945bfc9538beac73">priceCola</a></div><div class="ttdeci">int priceCola</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00021">fsm.c:21</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a2dd1881b525e07e351d4666707fc475d">S_DISPENSE</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00014">fsm.c:14</a></div></div>
<div class="ttc" id="aa00014_html_a66d74535b2f48198520b9619a6778360"><div class="ttname"><a href="a00014.html#a66d74535b2f48198520b9619a6778360">CNAcheckCoins</a></div><div class="ttdeci">event_e CNAcheckCoins(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00014_source.html#l00040">coinAcceptor.c:40</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9a0eabea4ca6db9bb1e7806a0d4f03f0f2">S_DETECTED_20C</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00013">fsm.c:13</a></div></div>
<div class="ttc" id="aa00035_html_a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4"><div class="ttname"><a href="a00035.html#a52b77dcd6180d54d314b8cbf0b4dc2d9ac8f4ec32e3072834ce032df1c20f83a4">S_INITIALISED</a></div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00010">fsm.c:10</a></div></div>
<div class="ttc" id="aa00020_html_afdd677169e16078a00183b2543fa3ea7"><div class="ttname"><a href="a00020.html#afdd677169e16078a00183b2543fa3ea7">CLDdispenseCola</a></div><div class="ttdeci">void CLDdispenseCola(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00020_source.html#l00011">colaDispenser.c:11</a></div></div>
<div class="ttc" id="aa00032_html_ab84d33304ff89cf68d47913663acbad0a82571e1f0565e4b476c5ff5bf56982fd"><div class="ttname"><a href="a00032.html#ab84d33304ff89cf68d47913663acbad0a82571e1f0565e4b476c5ff5bf56982fd">E_CHANGE_DISPENSE</a></div><div class="ttdef"><b>Definition:</b> <a href="a00032_source.html#l00012">events.h:12</a></div></div>
<div class="ttc" id="aa00026_html_a19ffdfbb88b7984ac489cbf8445a34dc"><div class="ttname"><a href="a00026.html#a19ffdfbb88b7984ac489cbf8445a34dc">DSPinitialise</a></div><div class="ttdeci">void DSPinitialise(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00006">display.c:6</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0e1012fa0788700c5aef7ae8c3c3c1a5.html">CVM-4</a></li><li class="navelem"><a class="el" href="a00035.html">fsm.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
